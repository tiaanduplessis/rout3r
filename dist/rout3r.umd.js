!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("history"),require("wayfarer")):"function"==typeof define&&define.amd?define(["exports","react","history","wayfarer"],r):r(t.rout3r={},t.react,t.history,t.wayfarer)}(this,function(t,r,e,n){var o="default"in r?r.default:r;n=n&&n.hasOwnProperty("default")?n.default:n;var i=r.createContext(),a=i.Provider,s=i.Consumer;function u(t){return void 0===t&&(t=""),t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(function(t,r){var e=r.split("="),n=e[1];return t[e[0]]=n?decodeURIComponent(n.replace(/\+/g," ")):"",t},{}):{}}t.Router=function(t){function r(r){var i=this;t.call(this,r),this.history=r.history||e.createBrowserHistory(),this.unlisten=null,this.router=n(r.defaultPath||"/"),this.actions={push:this.history.push,goBack:this.history.goBack,goForward:this.history.goForward,replace:this.history.replace},o.Children.map(r.children,function(t){return i.addRoute(t)}),this.state={search:window.location.search,url:window.location.pathname}}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.componentDidMount=function(){var t=this;this.unlisten=this.history.listen(function(r){var e=r.pathname,n=r.search;t.setState(function(t){return Object.assign({},t,{url:e,search:n})})})},r.prototype.componentWillUnmount=function(){this.unlisten()},r.prototype.addRoute=function(t){this.router.on(t.props.path,function(r){return function(t,r){return h(s,null,function(e){var n=e.state,i=e.push,a=e.replace,s=e.goBack,c=e.goForward;return o.cloneElement(t,{path:n.url,searchParams:u(n.search),push:i,replace:a,goBack:s,goForward:c,params:r})})}(t,r)})},r.prototype.render=function(){var t=this.state.url;return h(a,{value:Object.assign({},{state:this.state},this.actions)},this.router(t))},r}(o.Component),t.Link=function(t){var r=t.path,e=t.href,n=t.children,o=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===r.indexOf(n)&&(e[n]=t[n]);return e}(t,["path","href","children"]),i=e||r;return h(s,null,function(t){var r=t.push;return h("a",Object.assign({},o,{href:i,onClick:function(t){t.preventDefault(),r(i)}}),n)})}});
