function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var r=require("react"),e=t(r),n=require("history"),o=t(require("wayfarer"));var i=r.createContext(),a=i.Provider,s=i.Consumer;function u(t){return void 0===t&&(t=""),t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(function(t,r){var e=r.split("="),n=e[1];return t[e[0]]=n?decodeURIComponent(n.replace(/\+/g," ")):"",t},{}):{}}exports.Router=function(t){function r(r){var i=this;t.call(this,r),this.history=r.history||n.createBrowserHistory(),this.unlisten=null,this.router=o(r.defaultPath||"/"),this.actions={push:this.history.push,goBack:this.history.goBack,goForward:this.history.goForward,replace:this.history.replace},e.Children.map(r.children,function(t){return i.addRoute(t)}),this.state={search:window.location.search,url:window.location.pathname}}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.componentDidMount=function(){var t=this;this.unlisten=this.history.listen(function(r){var e=r.pathname,n=r.search;t.setState(function(t){return Object.assign({},t,{url:e,search:n})})})},r.prototype.componentWillUnmount=function(){this.unlisten()},r.prototype.addRoute=function(t){this.router.on(t.props.path,function(r){return function(t,r){return h(s,null,function(n){var o=n.state,i=n.push,a=n.replace,s=n.goBack,c=n.goForward;return e.cloneElement(t,{path:o.url,searchParams:u(o.search),push:i,replace:a,goBack:s,goForward:c,params:r})})}(t,r)})},r.prototype.render=function(){var t=this.state.url;return h(a,{value:Object.assign({},{state:this.state},this.actions)},this.router(t))},r}(e.Component),exports.Link=function(t){var r=t.path,e=t.href,n=t.children,o=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===r.indexOf(n)&&(e[n]=t[n]);return e}(t,["path","href","children"]),i=e||r;return h(s,null,function(t){var r=t.push;return h("a",Object.assign({},o,{href:i,onClick:function(t){t.preventDefault(),r(i)}}),n)})};
